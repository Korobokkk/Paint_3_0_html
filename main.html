<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="uft-8" />
    <title>Рисовашки</title>
  </head>

  <body>
    <h1>Рисовашки</h1>
    <p>Здесь вы можете нарисовать <strong>всё</strong> что угодно!</p>
    <p onclick="text_display('help')">Если вам нужна помощь, <ins>нажмите сюда</ins></p>
    <div id="help" style="display: none">
      <p>HELP Текст</p>
    </div>

    <button onclick ="paletteVisibility()">Выбор цвета</button>
	<button onclick="clearCanvas()">Новый лист</button>
    <button onclick="eraser()">Ластик</button>
    
    <div id="palette" style="display: none;">
		<button onclick="selectColor('#000000')">Черный</button>
		<button onclick="selectColor('#ff0000')">Красный </button>
		<button onclick="selectColor('#008000')">Зеленый</button>
		<button onclick="selectColor('#0000ff')">Синий</button>
		<button onclick="selectColor('#ffff00')">Желтый</button>
		<button onclick="selectColor('#ff6f00')">Оранжевый</button>
		<button onclick="selectColor('#8b00ff')">Фиолетовый</button>
		<button onclick="selectColor('#808080')">Серый</button>
		<button onclick="selectColor('#ff0099')">Розовый</button>
		<button onclick="selectColor('#00ffff')">Голубой</button>
    </div> 
	
	<div id ="size" style= "display: none;">
	<button onclick= "selectSize(5)">5</button>
	<button onclick= "selectSize(10)">10</button>
	<button onclick= "selectSize(20)">20</button>	
	<button onclick= "selectSize(30)">30</button>
	<button onclick= "selectSize(50)">50</button>
	<button onclick= "selectSize(100)">100</button>
	</div>
	
    <div style="height: 20px;"></div> 
    
    <canvas id="canvas" width= '800' height= '600' style="border: 5px solid black; ">
      Версия вашего браузера устарела. Загрузка canvas невозможна
    </canvas>
    <script>
      function text_display(id){
        const element = document.getElementById(id);
        if( element.style.display === 'none'){
          element.style.display = 'block';}
        else{
          element.style.display = 'none';
        }
      }

      function paletteVisibility()
      {
        const palette = document.getElementById('palette');
        if (palette.style.display==='none'){
          palette.style.display = 'block';
        }
        else{
          palette.style.display = 'none';
        }
      }
      
      function selectColor(color){
        const canvas= document.getElementById('canvas');
        const context= canvas.getContext('2d');
        context.strokeStyle= color;
        paletteVisibility();
        }
      
      function clearCanvas(){
        const canvas= document.getElementById('canvas');
        const context= canvas.getContext('2d');
        context.clearRect(0,0,canvas.width, canvas.height);
      }
	  function eraser(){
		const  size= document.getElementById('size');
		if(size.style.display==='none')
		{
			size.style.display='block';
		}
		else{
			size.style.display='none';
		}
	  }
	  function selectSize(lineWidth){
		const canvas= document.getElementById('canvas');
        const context= canvas.getContext('2d');
		context.strokeStyle='#ffffff';
		context.lineWidth =lineWidth;
        eraser();
	  }

      function work_with_canvas(){
        const element= document.getElementById('canvas');
        const context= element.getContext('2d');
        
        let valueConfiguration=
        {
          color: '#000000',
          lineWidth: 3
        };
        
        //function setValueCanvasLineWidth(newLineWidth){
          //valueConfiguration.lineWidth= newLineWidth;
        //}

        context.strokeStyle = valueConfiguration.color;
        context.lineWidth = valueConfiguration.lineWidth;

        let checkPainting=
        {
          isActive: false,
          startX: 0,
          startY: 0
        };
        function handleMouseDown(event)
        {
          checkPainting.isActive= true;
          checkPainting.startX= event.offsetX;
          checkPainting.startY= event.offsetY;
        }
        function handleMouseUp(event)
        {
          if(!checkPainting.isActive)
          {
            return;
          }
          let endX= event.offsetX;
          let endY= event.offsetY;
          drawLine(context, checkPainting.startX, checkPainting.startY, endX, endY);
          checkPainting.isActive= false;
        }

        function drawLine(context, startX, startY, endX, endY)
        {
          context.beginPath();
          context.moveTo(startX, startY);
          context.lineTo(endX, endY);
          context.stroke();
        }
        element.addEventListener('mousedown', handleMouseDown);
        element.addEventListener('mouseup', handleMouseUp);
      }

      work_with_canvas();
    </script>
  </body>
</html>

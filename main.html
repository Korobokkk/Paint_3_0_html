<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="uft-8" />
    <title>Рисовашки</title>
  </head>

  <body>
    <h1>Рисовашки</h1>
    <p>Здесь вы можете нарисовать <strong>всё</strong> что угодно!</p>
    <p onclick="text_display('help')">Если вам нужна помощь, <ins>нажмите сюда</ins></p>
    <div id="help" style="display: none">
      <p>HELP Текст</p>
    </div>

    <button onclick ="paletteVisibility()">Выбор цвета</button>

    <div id="palette" style="display: none;">
      <button onclick="selectColor('#000000')">Черный </button>
      <button onclick="selectColor('#ff0000')">Красный </button>
    </div> 

    <div style="height: 20px;"></div> 
    
    <canvas id="canvas" width= '800' height= '600' style="border: 5px solid black; ">
      Версия вашего браузера устарела. Загрузка canvas невозможна
    </canvas>
    <script>
      function text_display(id){
        const element = document.getElementById(id);
        if( element.style.display === 'none'){
          element.style.display = 'block';}
        else{
          element.style.display = 'none';
        }
      }

      function paletteVisibility()
      {
        const palette = document.getElementById('palette');
        if (palette.style.display==='none'){
          palette.style.display = 'block';
        }
        else{
          palette.style.display = 'none';
        }
      }
      function selectColor(color){
        const canvas= document.getElementById('canvas');
        const context= canvas.getContext('2d');
        context.strokeStyle= color;
        paletteVisibility();
        }
      

      function work_with_canvas(){
        const element= document.getElementById('canvas');
        const context= element.getContext('2d');
        
        let valueConfiguration=
        {
          color: '#000000',
          lineWidth: 3
        };
        
        //function setValueCanvasLineWidth(newLineWidth){
          //valueConfiguration.lineWidth= newLineWidth;
        //}

        context.strokeStyle = valueConfiguration.color;
        context.lineWidth = valueConfiguration.lineWidth;

        let checkPainting=
        {
          isActive: false,
          startX: 0,
          startY: 0
        };
        function handleMouseDown(event)
        {
          checkPainting.isActive= true;
          checkPainting.startX= event.offsetX;
          checkPainting.startY= event.offsetY;
        }
        function handleMouseUp(event)
        {
          if(!checkPainting.isActive)
          {
            return;
          }
          let endX= event.offsetX;
          let endY= event.offsetY;
          drawLine(context, checkPainting.startX, checkPainting.startY, endX, endY);
          checkPainting.isActive= false;
        }

        function drawLine(context, startX, startY, endX, endY)
        {
          context.beginPath();
          context.moveTo(startX, startY);
          context.lineTo(endX, endY);
          context.stroke();
        }
        element.addEventListener('mousedown', handleMouseDown);
        element.addEventListener('mouseup', handleMouseUp);
      }

      work_with_canvas();
    </script>
  </body>
</html>
